<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>软件学院课程质量评价系统</title>

    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/authentication/form-2.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <link rel="stylesheet" type="text/css" href="assets/css/forms/theme-checkbox-radio.css">
    <link rel="stylesheet" type="text/css" href="assets/css/forms/switches.css">
    <link rel="stylesheet" type="text/css" href="plugins/bootstrap-select/bootstrap-select.min.css">
    <link href="plugins/sweetalerts/sweetalert2.min.css" rel="stylesheet" type="text/css" />
    <link href="plugins/animate/animate.css" rel="stylesheet" type="text/css" />


</head>
<body class="form">


<div class="form-container outer">
    <div class="form-form">
        <div class="form-form-wrap">
            <div class="form-container">
                <div class="form-content">

                    <div class="d-flex justify-content-between" style="margin-top: 5px;">
                        <h3 class="">忘记密码</h3>
                        <a href="/" class="forgot-pass-link" style="float: right;">去登陆>></a>
                    </div>


                    <form class="text-left needs-validation" action="/alterPassword" method="post" novalidate>
                        <div class="form">

                            <div id="no-field" class="field-wrapper input">
                                <label for="no">工号/学号</label>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                <input id="no" name="no" type="number" class="form-control" placeholder="请输入您的工号/学号" required max="99999999" min="10000000" onkeyup = "value=value.replace(/[^\d]/g,'')">

                                <div class="invalid-feedback">
                                    工号/学号格式错误！
                                </div>
                            </div>

                            <div id="phone-field" class="field-wrapper input">
                                <label for="phone">手机号</label>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                <input id="phone" name="phone" type="number" class="form-control" placeholder="请输入您的预存手机号" required max="99999999999" min="10000000000" onkeyup = "value=value.replace(/[^\d]/g,'')">

                                <div class="invalid-feedback">
                                    手机号格式错误！
                                </div>
                            </div>

                            <div id="password-field" class="field-wrapper input">
                                <label for="code">验证码</label>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                <div class="d-flex justify-content-between">
                                    <input id="code" name="code" type="text" class="form-control" placeholder="请输入您的手机验证码" required>
                                    <button class="btn btn-primary" type="button" style="width: 30%;position: absolute;margin-left: 70%;font-size: small;" onclick="sendVerifyCode();">发送验证码</button>
                                </div>
                                <div class="invalid-feedback">
                                    验证码不能为空！
                                </div>
                            </div>

                            <div id="password-field1" class="field-wrapper input">
                                <label for="password1">新密码</label>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                <input id="password1" name="password1" type="password" class="form-control" placeholder="请输入您的新密码" required minlength="8">
                                <div class="invalid-feedback">
                                    密码最少为8位！
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="toggle-password1" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            </div>

                            <div id="password-field2" class="field-wrapper input">
                                <label for="password2">确认密码</label>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                <input id="password2" name="password2" type="password" class="form-control" placeholder="请再次输入您的新密码" required minlength="8">
                                <div class="invalid-feedback">
                                    密码最少为8位！
                                </div>
                                <div class="invalid-feedback2" style="display: none">
                                    两次输入密码不一致！
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="toggle-password2" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            </div>


                            <div class="d-sm-flex justify-content-between" style="margin-top: 10px;">
                                <div class="field-wrapper">
                                    <button type="submit" class="btn btn-primary" value="">重置</button>
                                </div>
                            </div>

                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<input id="message" th:value="${message}" hidden>
<!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
<script src="assets/js/libs/jquery-3.1.1.min.js"></script>
<script src="bootstrap/js/popper.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

<!-- END GLOBAL MANDATORY SCRIPTS -->
<script src="assets/js/authentication/form-2.js"></script>
<script src="plugins/sweetalerts/sweetalert2.min.js"></script>
<script src="assets/js/forms/bootstrap_validation/bs_validation_script.js"></script>

<script>

    var msg = $("#message").val();
    if (msg !== '') {
        swal({
            title:msg,
            padding: '2em'
        });
    }

    //发送验证码
    function sendVerifyCode(){
        var phone = $("#phone").val();
        if (phone.length!==11){
            swal({
                title:"手机号不能为空！",
                padding: '2em'
            });
            return false;
        }
        $.ajax({
            url: "/sendSms?phone="+phone,
            type: "post",
            success: function (data) {
                if (data==='success'){
                    swal({
                        title:"验证码发送成功，请注意查收！",
                        padding: '2em'
                    });
                } else {
                    swal({
                        title:"验证码发送失败，请稍后重试！",
                        padding: '2em'
                    });
                }
            }
        });
    }
</script>

<style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
    }
    input[type="number"]{
        -moz-appearance: textfield;
    }
</style>
</body>
</html>
